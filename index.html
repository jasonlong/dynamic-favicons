<html>
<head>
  <title>Dynamic Favicon</title>

  <!-- NOTE: Set the current status below (status-icon-[green|orange|red]) -->
  <link id="favicon" rel="icon" type="image/png" href="status-icon-default.png" />

  <script src="js/jquery.js" type="text/javascript"></script>
</head>
<body>
  The favicon above should update every 3 seconds (in Chrome and Firefox). As far as I can tell, the other browsers don't support updating favicons after loading, we'll have to rely on setting the current status on page load and having those users refresh the page.

  <script>
    var link          = $('#favicon').clone();
    var statuses      = ['green', 'orange', 'red'];
    var currentStatus = 0;
    var timer         = setInterval(switchFavicon, 3000);

    function switchFavicon() {
      if (currentStatus === 3) currentStatus = 0;
      // for Chrome
      $('#favicon').attr({href: 'status-icon-'+statuses[currentStatus]+'.png'});
      // for Firefox
      $(link).attr({href: 'status-icon-'+statuses[currentStatus]+'.png'});
      $('body').append(link);
      currentStatus += 1;
    }
  </script>
</body>
</html>